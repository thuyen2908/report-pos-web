# Instructions

- Following Playwright test failed.
- Explain why, be concise, respect Playwright best practices.
- Provide a snippet of code with the fix, if possible.

# Test info

- Name: Reopen tickets >> Reopen ticket to adjust tip for Credit Card
- Location: /home/circleci/project/e2e/pos-web/dist/bdd/reopen-ticket.feature.spec.js:139:3

# Error details

```
Error: locator.click: Test timeout of 90000ms exceeded.
Call log:
  - waiting for locator('li.xNavbar__item').filter({ hasText: /^Clock In$/ })

    at HomePage.selectNavItem (/home/circleci/project/e2e/pos-web/src/steps/x.page.ts:208:36)
    at HomePage.clockInTimesheet (/home/circleci/project/e2e/pos-web/src/steps/x.page.ts:265:3)
    at /home/circleci/project/node_modules/.pnpm/playwright-bdd@8.2.1_@cucumber+message-streams@4.0.1_@cucumber+messages@27.0.2__@playwright+test@1.51.1/node_modules/playwright-bdd/src/runtime/bddStepInvoker.ts:57:22
    at BddStepInvoker.invoke (/home/circleci/project/node_modules/.pnpm/playwright-bdd@8.2.1_@cucumber+message-streams@4.0.1_@cucumber+messages@27.0.2__@playwright+test@1.51.1/node_modules/playwright-bdd/src/runtime/bddStepInvoker.ts:51:5)
    at /home/circleci/project/e2e/pos-web/dist/bdd/reopen-ticket.feature.spec.js:141:5
```

# Page snapshot

```yaml
- banner:
  - img
  - list:
    - listitem: Timesheet
    - listitem: Check In
    - listitem: Tickets
    - listitem: Turn
    - listitem: Appointment
    - listitem: Quick Sale
    - listitem: Balance
  - text: Mar 26
  - list:
    - listitem: BLANC NAILS
    - listitem:
      - paragraph: ", , | (707) 707-1122"
      - text: "Thuyen Nguyen | Station: 1"
- list
- main:
  - text: CHECK-INS No Customer
  - button "search"
  - list:
    - listitem:
      - button "Ready"
    - listitem:
      - button "In Service"
    - listitem:
      - button "Paid"
    - listitem:
      - button "All" [disabled]
  - text: No Ticket Found.
- alert
```

# Test source

```ts
  108 | 			/**
  109 | 			 * Locate the page's header
  110 | 			 */
  111 | 			pageHeader,
  112 | 			/**
  113 | 			 * Locate the name of the current page, usually on the top left corner of the page, ex: "Ticket View".
  114 | 			 * Some pages don't have this element
  115 | 			 */
  116 | 			pageName: pageHeader.locator('p.pageName'),
  117 | 			/**
  118 | 			 * Locate the page detail section of the current page, usually appears below the page name, ex: "John Doe - #001" (Ticket View page).
  119 | 			 * Some pages don't have this element
  120 | 			 */
  121 | 			pageDetail: pageHeader.locator('p.pageDetail'),
  122 |
  123 | 			/**
  124 | 			 * Locate the Company Profile section of the current Salon + the Breadcrumb element,
  125 | 			 * 	which is usually located on the top right corner of the page, next to the Calendar element
  126 | 			 */
  127 | 			companyProfile,
  128 | 			/**
  129 | 			 * Like the {@link companyProfile} locator, except it doesn't include the Breadcrumb element
  130 | 			 */
  131 | 			merchantInfo,
  132 | 			/**
  133 | 			 * Locate the name of the Salon on the top right corner of the page
  134 | 			 */
  135 | 			merchantName: merchantInfo.locator(
  136 | 				'li.merchantInfo__dbaName > span.label',
  137 | 			),
  138 | 			/**
  139 | 			 * Locate the contact information (address, phone number,...) on the top right corner of the page
  140 | 			 */
  141 | 			merchantContact: merchantInfo.locator('li.merchantInfo__address'),
  142 |
  143 | 			/**
  144 | 			 * Locate a Navigation Menu item
  145 | 			 */
  146 | 			navItem: (itemName: string) =>
  147 | 				page.locator('li.xNavbar__item', {
  148 | 					hasText: new RegExp(`^${itemName}$`),
  149 | 				}),
  150 | 		};
  151 | 	}
  152 |
  153 | 	/**
  154 | 	 * Wait for a specific API call to be completed
  155 | 	 */
  156 | 	public waitForResponseOfAPI(api: keyof typeof constants.APIs) {
  157 | 		return this.page.waitForResponse((response) => {
  158 | 			const [method, url] = constants.APIs[api];
  159 | 			const request = response.request();
  160 |
  161 | 			return request.url().includes(url) && request.method() === method;
  162 | 		});
  163 | 	}
  164 |
  165 | 	/**
  166 | 	 * Enter a PIN using the on-screen numpad
  167 | 	 */
  168 | 	public async enterPIN(PIN: string, numpadLocator: Locator) {
  169 | 		for (const pinDigit of PIN) {
  170 | 			const pinDigitButton = numpadLocator.getByText(pinDigit, { exact: true });
  171 | 			await pinDigitButton.click();
  172 | 		}
  173 | 	}
  174 |
  175 | 	/* -------------------------------- BDD steps ------------------------------- */
  176 |
  177 | 	/**
  178 | 	 * Go to a specific page by its {@link PageId}
  179 | 	 */
  180 | 	@Given('I am on the {pageId} page')
  181 | 	public async gotoPage(pageId: PageId) {
  182 | 		await this.page.goto(constants.PageUrl[pageId]);
  183 | 	}
  184 |
  185 | 	/**
  186 | 	 * Wait for the page fully loaded
  187 | 	 */
  188 | 	@When('I wait for the page fully loaded')
  189 | 	public waitForNetworkIdle() {
  190 | 		return this.page.waitForLoadState('networkidle');
  191 | 	}
  192 |
  193 | 	/**
  194 | 	 * Select an item in the Navigation Bar
  195 | 	 *
  196 | 	 * @param navPath - The path to the navigation item, could be a single item or a path to a nested item, separated by " > ".
  197 | 	 *   For example: "Quick Sale", "Timesheet > Clock In", "Timesheet > Clock Out"
  198 | 	 */
  199 | 	@When('I navigate to {string} on the navigation bar')
  200 | 	public async selectNavItem(navPath: string) {
  201 | 		const { locators } = this;
  202 |
  203 | 		// wait for the menu bar ready
  204 | 		await this.waitForNetworkIdle();
  205 |
  206 | 		const navItems = navPath.split(' > ');
  207 | 		for (const navItem of navItems) {
> 208 | 			await locators.navItem(navItem).click();
      | 			                                ^ Error: locator.click: Test timeout of 90000ms exceeded.
  209 | 		}
  210 | 	}
  211 |
  212 | 	/**
  213 | 	 * Click on an element inside the content section of the opening dialog
  214 | 	 */
  215 | 	@When(
  216 | 		'I click on the {string} text inside the content section of the opening dialog',
  217 | 	)
  218 | 	public async clickOnContentElementInsideOpeningDialog(text: string) {
  219 | 		const { locators } = this;
  220 |
  221 | 		const dialog = locators.dialog();
  222 | 		const dialogContent = locators.dialogContent(dialog);
  223 |
  224 | 		await dialogContent.getByText(text, { exact: true }).click();
  225 | 	}
  226 |
  227 | 	/**
  228 | 	 * Click on Action Buttons of the opening dialog, ex: "CONFIRM", "CANCEL",...
  229 | 	 */
  230 | 	@When('I click on the action button {string} of the opening dialog')
  231 | 	public async clickOnActionButtonOfOpeningDialog(buttonText: string) {
  232 | 		const { locators } = this;
  233 |
  234 | 		const dialog = locators.dialog();
  235 | 		const actionButton = locators.dialogActionButton(dialog, buttonText);
  236 |
  237 | 		await actionButton.click();
  238 | 	}
  239 |
  240 | 	/**
  241 | 	 * Close the opening dialog if it's visible
  242 | 	 */
  243 | 	@When('I close the opening dialog')
  244 | 	public async closeOpeningDialog() {
  245 | 		const { locators } = this;
  246 |
  247 | 		const dialog = locators.dialog();
  248 | 		const closeButton = locators.dialogCloseButton(dialog);
  249 |
  250 | 		await closeButton.click();
  251 | 	}
  252 |
  253 | 	/**
  254 | 	 * Clock In/Out Timesheet with provided PIN
  255 | 	 */
  256 | 	@When('I clock {timesheetAction} the timesheet with PIN {string}')
  257 | 	public async clockInTimesheet(timesheetAction: TimesheetAction, PIN: string) {
  258 | 		const { locators } = this;
  259 |
  260 | 		// find and click on the Clock In / Out button
  261 | 		const clockInOutNavigationPath =
  262 | 			timesheetAction === 'in'
  263 | 				? 'Timesheet > Clock In'
  264 | 				: 'Timesheet > Clock Out';
  265 | 		await this.selectNavItem(clockInOutNavigationPath);
  266 |
  267 | 		// expect the enter password dialog to be visible
  268 | 		const enterPasswordDialog = locators.dialog('PASSWORD');
  269 | 		await expect(enterPasswordDialog).toBeVisible();
  270 |
  271 | 		// enter the PIN
  272 | 		await this.enterPIN(PIN, enterPasswordDialog);
  273 |
  274 | 		// click confirm action button
  275 | 		await this.clickOnActionButtonOfOpeningDialog('CONFIRM');
  276 |
  277 | 		const successfullyClockedInToast = locators.toast.getByText(
  278 | 			'clocked in successfully',
  279 | 		); // in case of new session
  280 | 		const alreadyClockedInToast = locators.toast.getByText('has clocked in'); // in case there's an existing session
  281 |
  282 | 		// expect a toast message indicating the result of the operation
  283 | 		await expect(
  284 | 			successfullyClockedInToast.or(alreadyClockedInToast),
  285 | 		).toBeVisible();
  286 |
  287 | 		// if the dialog is still visible, close it
  288 | 		if (await enterPasswordDialog.isVisible()) await this.closeOpeningDialog();
  289 | 	}
  290 | }
  291 |
```