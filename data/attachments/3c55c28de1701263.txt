# Instructions

- Following Playwright test failed.
- Explain why, be concise, respect Playwright best practices.
- Provide a snippet of code with the fix, if possible.

# Test info

- Name: Reopen tickets >> Reopen ticket to remove payment Cash and instead of Credit
- Location: /home/circleci/project/e2e/pos-web/dist/bdd/reopen-ticket.feature.spec.js:180:3

# Error details

```
Error: Timed out 30000ms waiting for expect(locator).toHaveText(expected)

Locator: locator('.TicketSearch__customer .mainTitle').getByText('Ron')
Expected string: "Ron"
Received: <element(s) not found>
Call log:
  - expect.toHaveText with timeout 30000ms
  - waiting for locator('.TicketSearch__customer .mainTitle').getByText('Ron')

    at Object.<anonymous> (/home/circleci/project/e2e/pos-web/src/features/steps.ts:368:33)
    at /home/circleci/project/node_modules/.pnpm/playwright-bdd@8.2.1_@cucumber+message-streams@4.0.1_@cucumber+messages@27.0.2__@playwright+test@1.51.1/node_modules/playwright-bdd/src/runtime/bddStepInvoker.ts:57:60
    at BddStepInvoker.invoke (/home/circleci/project/node_modules/.pnpm/playwright-bdd@8.2.1_@cucumber+message-streams@4.0.1_@cucumber+messages@27.0.2__@playwright+test@1.51.1/node_modules/playwright-bdd/src/runtime/bddStepInvoker.ts:51:5)
    at /home/circleci/project/e2e/pos-web/dist/bdd/reopen-ticket.feature.spec.js:190:5
```

# Page snapshot

```yaml
- banner:
  - img
  - paragraph: Ticket View
  - paragraph: "Samantha (Nails) - #256"
  - button "VOID TICKET"
  - text: Mar 27
  - list:
    - listitem: BLANC NAILS
    - listitem:
      - paragraph: ", , | (707) 707-1122"
      - text: "Thuyen Nguyen | Station: 1"
- list
- main:
  - button "search"
  - tablist:
    - tab "MANI & PEDI" [selected]
    - tab "FULL SET & FILL IN"
    - tab "GIFT CARD"
  - tabpanel:
    - list:
      - listitem: M Manicure $6.00
      - listitem: P Pedicure $8.00
      - listitem: C Cut cuticle $10.00
      - listitem: G Gel removal $40.00
      - listitem: A Acrylic removal $30.00
      - listitem: G Gel X $27.00
      - listitem: R Request price $0.00
      - listitem: C Combo 1 $45.00
      - listitem: C Combo 2 $60.00
      - listitem: S Supper combo $0.00
  - button "1"
  - text: Search Customer
  - combobox "Search Customer" [expanded]
  - progressbar:
    - img
  - listbox "Search Customer":
    - option "Guest (571) 663-7328":
      - text: Guest
      - paragraph: (571) 663-7328
    - option "Zoe (111) 111-1111":
      - text: Zoe
      - paragraph: (111) 111-1111
    - option "Guest (261) 218-9340":
      - text: Guest
      - paragraph: (261) 218-9340
    - option "Alice (555) 555-5555":
      - text: Alice
      - paragraph: (555) 555-5555
    - option "Guest (407) 355-3793":
      - text: Guest
      - paragraph: (407) 355-3793
    - option "Bill (888) 888-8888":
      - text: Bill
      - paragraph: (888) 888-8888
    - option "Guest (385) 296-5271":
      - text: Guest
      - paragraph: (385) 296-5271
    - option "Guest (771) 661-3011":
      - text: Guest
      - paragraph: (771) 661-3011
    - option "Guest (472) 385-4140":
      - text: Guest
      - paragraph: (472) 385-4140
    - option "Guest (776) 957-0807":
      - text: Guest
      - paragraph: (776) 957-0807
    - option "Guest (746) 912-7367":
      - text: Guest
      - paragraph: (746) 912-7367
    - option "Guest (278) 624-8134":
      - text: Guest
      - paragraph: (278) 624-8134
    - option "Guest (112) 066-1640":
      - text: Guest
      - paragraph: (112) 066-1640
    - option "Guest (951) 871-9338":
      - text: Guest
      - paragraph: (951) 871-9338
    - option "Guest (763) 801-3036":
      - text: Guest
      - paragraph: (763) 801-3036
    - option "Guest (613) 120-8316":
      - text: Guest
      - paragraph: (613) 120-8316
    - option "Guest (730) 972-5109":
      - text: Guest
      - paragraph: (730) 972-5109
    - option "Guest (281) 891-2031":
      - text: Guest
      - paragraph: (281) 891-2031
    - option "Guest (395) 263-5532":
      - text: Guest
      - paragraph: (395) 263-5532
    - option "Guest (256) 979-4604":
      - text: Guest
      - paragraph: (256) 979-4604
    - option "Guest (737) 227-9939":
      - text: Guest
      - paragraph: (737) 227-9939
    - option "Guest (276) 895-0856":
      - text: Guest
      - paragraph: (276) 895-0856
    - option "Guest (287) 880-1412":
      - text: Guest
      - paragraph: (287) 880-1412
    - option "Guest (418) 028-5379":
      - text: Guest
      - paragraph: (418) 028-5379
    - option "Guest (468) 858-5914":
      - text: Guest
      - paragraph: (468) 858-5914
    - option "Guest (166) 470-0730":
      - text: Guest
      - paragraph: (166) 470-0730
    - option "Ella (222) 222-2222":
      - text: Ella
      - paragraph: (222) 222-2222
    - option "Guest (508) 957-5780":
      - text: Guest
      - paragraph: (508) 957-5780
    - option "Guest (240) 667-6331":
      - text: Guest
      - paragraph: (240) 667-6331
    - option "Guest (445) 773-4458":
      - text: Guest
      - paragraph: (445) 773-4458
    - option "Guest (630) 161-3428":
      - text: Guest
      - paragraph: (630) 161-3428
    - option "Guest (156) 903-2957":
      - text: Guest
      - paragraph: (156) 903-2957
    - option "Guest (418) 694-9933":
      - text: Guest
      - paragraph: (418) 694-9933
    - option "Guest (143) 166-2624":
      - text: Guest
      - paragraph: (143) 166-2624
    - option "Guest (985) 363-0232":
      - text: Guest
      - paragraph: (985) 363-0232
    - option "Guest (995) 017-6142":
      - text: Guest
      - paragraph: (995) 017-6142
    - option "Guest (969) 196-4535":
      - text: Guest
      - paragraph: (969) 196-4535
    - option "Guest (951) 012-2207":
      - text: Guest
      - paragraph: (951) 012-2207
    - option "Guest (448) 467-6021":
      - text: Guest
      - paragraph: (448) 467-6021
    - option "Guest (407) 722-0493":
      - text: Guest
      - paragraph: (407) 722-0493
    - option "Guest (591) 874-9582":
      - text: Guest
      - paragraph: (591) 874-9582
    - option "Guest (536) 527-1579":
      - text: Guest
      - paragraph: (536) 527-1579
    - option "Guest (937) 053-1308":
      - text: Guest
      - paragraph: (937) 053-1308
    - option "Guest (834) 610-7738":
      - text: Guest
      - paragraph: (834) 610-7738
    - option "Guest (339) 057-6535":
      - text: Guest
      - paragraph: (339) 057-6535
    - option "Guest (150) 784-2353":
      - text: Guest
      - paragraph: (150) 784-2353
    - option "Guest (695) 696-4229":
      - text: Guest
      - paragraph: (695) 696-4229
    - option "Layla (777) 777-7777":
      - text: Layla
      - paragraph: (777) 777-7777
    - option "Guest (266) 671-3959":
      - text: Guest
      - paragraph: (266) 671-3959
    - option "Guest (248) 940-8770":
      - text: Guest
      - paragraph: (248) 940-8770
    - option "Guest (547) 082-5200":
      - text: Guest
      - paragraph: (547) 082-5200
    - option "Tin (999) 999-9999":
      - text: Tin
      - paragraph: (999) 999-9999
    - option "Guest (909) 232-5722":
      - text: Guest
      - paragraph: (909) 232-5722
    - option "Guest (915) 020-2163":
      - text: Guest
      - paragraph: (915) 020-2163
    - option "Guest (655) 484-1562":
      - text: Guest
      - paragraph: (655) 484-1562
    - option "Ron (444) 444-4444" [selected]:
      - text: Ron
      - paragraph: (444) 444-4444
    - option "Guest (666) 400-8843":
      - text: Guest
      - paragraph: (666) 400-8843
    - option "Guest (684) 527-7962":
      - text: Guest
      - paragraph: (684) 527-7962
    - option "Guest (973) 189-7393":
      - text: Guest
      - paragraph: (973) 189-7393
    - option "Guest (359) 245-8112":
      - text: Guest
      - paragraph: (359) 245-8112
    - option "Guest (277) 847-1127":
      - text: Guest
      - paragraph: (277) 847-1127
    - option "Guest (240) 258-6735":
      - text: Guest
      - paragraph: (240) 258-6735
    - option "Harper (111) 222-3333":
      - text: Harper
      - paragraph: (111) 222-3333
    - option "Guest (841) 132-2002":
      - text: Guest
      - paragraph: (841) 132-2002
    - option "Guest (915) 255-2045":
      - text: Guest
      - paragraph: (915) 255-2045
    - option "Guest (264) 402-4847":
      - text: Guest
      - paragraph: (264) 402-4847
    - option "Guest (715) 458-8839":
      - text: Guest
      - paragraph: (715) 458-8839
    - option "Guest (935) 831-8495":
      - text: Guest
      - paragraph: (935) 831-8495
    - option "Guest (405) 337-9195":
      - text: Guest
      - paragraph: (405) 337-9195
    - option "Guest (301) 435-8438":
      - text: Guest
      - paragraph: (301) 435-8438
    - option "Guest (395) 071-9052":
      - text: Guest
      - paragraph: (395) 071-9052
    - option "Guest (613) 690-1963":
      - text: Guest
      - paragraph: (613) 690-1963
    - option "Guest (430) 350-3898":
      - text: Guest
      - paragraph: (430) 350-3898
    - option "Guest (849) 332-6986":
      - text: Guest
      - paragraph: (849) 332-6986
    - option "Guest (737) 412-6796":
      - text: Guest
      - paragraph: (737) 412-6796
    - option "Lila (333) 333-3333":
      - text: Lila
      - paragraph: (333) 333-3333
    - option "Riley (666) 666-6666":
      - text: Riley
      - paragraph: (666) 666-6666
  - button "Click Here To Add Customers"
  - button
  - list:
    - listitem: 1 Manicure S x 1 W Samantha (Nails) 01:20 AM - Now $6.00
  - list:
    - listitem: TECHNICIAN
    - listitem: DISCOUNT ITEM
    - listitem: COMBINE TICKET
    - listitem: VOID ITEM
  - list:
    - listitem: Tip $0.00
    - listitem: Discount $0.00
    - listitem:
      - text: Tax
      - button
      - text: $0.36
    - listitem: Sub Total $6.00
    - listitem: TOTAL $6.36
  - button "CANCEL"
  - button "PAY"
- alert: xPOS Salon - Galaxy Access Inc.
```

# Test source

```ts
  268 | });
  269 |
  270 | Then('I should see {string} tip in my cart', async ({ page }, tip: string) => {
  271 | 	const tipElement = page.locator('ul.xCharge').getByText(tip);
  272 |
  273 | 	await expect(tipElement).toContainText(tip);
  274 | });
  275 |
  276 | When(
  277 | 	'I fill the last 4 digits of card number {string}',
  278 | 	async ({ page }, number: string) => {
  279 | 		for (const digit of number) {
  280 | 			await page
  281 | 				.locator(`button.key:has(span.text-num:has-text("${digit}"))`)
  282 | 				.click();
  283 | 		}
  284 |
  285 | 		await expect(page.locator('.xPayment__card--number-digits')).toContainText(
  286 | 			number,
  287 | 		);
  288 | 	},
  289 | );
  290 |
  291 | When('I click on the Select customer', async ({ page }) => {
  292 | 	page.locator('.TicketSearch__customer').click();
  293 | });
  294 |
  295 | Then(
  296 | 	'I should see the loyalty program {string} visible',
  297 | 	async ({ page }, program: string) => {
  298 | 		const loyaltyProgram = page.locator(
  299 | 			'#mui-component-select-loyaltyProgramId',
  300 | 		);
  301 | 		await loyaltyProgram.waitFor({ state: 'attached' });
  302 | 		await expect(loyaltyProgram).toHaveText(program);
  303 | 	},
  304 | );
  305 |
  306 | Then(
  307 | 	'I should see the employee {string} visible in the split tip screen',
  308 | 	async ({ page }, employee: string) => {
  309 | 		const employeeElement = page
  310 | 			.locator('.xSplitTip__employee')
  311 | 			.getByText(employee, { exact: true });
  312 |
  313 | 		await expect(employeeElement).toHaveText(employee);
  314 | 	},
  315 | );
  316 |
  317 | Then(
  318 | 	'I should see the text {string} visible in the split tip screen',
  319 | 	async ({ page }, text: string) => {
  320 | 		const textElement = page
  321 | 			.locator('.xPayment__numpad.xSplitTip')
  322 | 			.getByText(text, { exact: true });
  323 |
  324 | 		await expect(textElement).toContainText(text);
  325 | 	},
  326 | );
  327 |
  328 | Then(
  329 | 	'I should see the total tip {string} visible in the split tip screen',
  330 | 	async ({ page }, totalTip: string) => {
  331 | 		const totalTipElement = page
  332 | 			.locator('.xPayment__numpad.xSplitTip')
  333 | 			.locator('.xSplitTip__numpad--tip')
  334 | 			.getByText(totalTip);
  335 |
  336 | 		await expect(totalTipElement).toContainText(totalTip);
  337 | 	},
  338 | );
  339 |
  340 | When(
  341 | 	'I fill the new customer name {string}',
  342 | 	async ({ page }, name: string) => {
  343 | 		const firstName = page.locator('input[name="firstName"]');
  344 | 		await firstName.fill(name);
  345 |
  346 | 		await expect(firstName).toHaveValue(name);
  347 | 	},
  348 | );
  349 |
  350 | When('I fill the new customer phone', async ({ page }) => {
  351 | 	const cellPhone = page.locator('input[name="cellPhone"]');
  352 | 	const rawPhone = Math.floor(
  353 | 		1000000000 + Math.random() * 9000000000,
  354 | 	).toString();
  355 | 	const formattedPhone = `(${rawPhone.substring(0, 3)}) ${rawPhone.substring(3, 6)}-${rawPhone.substring(6)}`;
  356 |
  357 | 	await cellPhone.fill(rawPhone);
  358 |
  359 | 	await expect(cellPhone).toHaveValue(formattedPhone);
  360 | });
  361 |
  362 | Then(
  363 | 	'I should see a new customer {string} on ticket',
  364 | 	async ({ page }, name: string) => {
  365 | 		const customerElement = page
  366 | 			.locator('.TicketSearch__customer .mainTitle')
  367 | 			.getByText(name);
> 368 | 		await expect(customerElement).toHaveText(name);
      | 		                              ^ Error: Timed out 30000ms waiting for expect(locator).toHaveText(expected)
  369 | 	},
  370 | );
  371 |
  372 | When('I add the {string} customer', async ({ page }, customer: string) => {
  373 | 	page.locator('.TicketSearch__customer ').click();
  374 | 	page.locator('.TicketSearch__customer input').fill(customer);
  375 | 	const selectCustomer = page
  376 | 		.locator('.MuiListItemText-root.name')
  377 | 		.getByText(customer, { exact: true });
  378 | 	await selectCustomer.click();
  379 | });
  380 |
  381 | When('I redeem my loyalty points', async ({ page }) => {
  382 | 	await page.locator('.xLoyalty__item').click();
  383 | 	await page.locator('.xLoyalty__btn').getByText('OK').click();
  384 | });
  385 |
  386 | When(
  387 | 	'I click on the {string} button in the split tip screen',
  388 | 	async ({ page }, button: string) => {
  389 | 		const buttonElement = page
  390 | 			.locator('.xPayment__numpad.xSplitTip')
  391 | 			.getByRole('button', { name: button });
  392 |
  393 | 		await expect(buttonElement).toBeVisible();
  394 |
  395 | 		await buttonElement.click();
  396 | 	},
  397 | );
  398 |
  399 | Then('I should see all split tips non-zero', async ({ page }) => {
  400 | 	const tipValues = page
  401 | 		.locator('.xSplitTip__employee')
  402 | 		.locator('.tip.row')
  403 | 		.locator('span.value');
  404 | 	const allTips = await tipValues.allTextContents();
  405 | 	expect(allTips).not.toContain('0.00');
  406 | 	expect(allTips.every((tip) => !tip.includes('0.00'))).toBeTruthy();
  407 | });
  408 |
  409 | When(
  410 | 	'I click on the {string} label in the header',
  411 | 	async ({ page }, label: string) => {
  412 | 		const labelElement = page
  413 | 			.locator('.xHeader__content')
  414 | 			.getByText(label, { exact: true });
  415 |
  416 | 		await expect(labelElement).toBeVisible();
  417 |
  418 | 		await labelElement.click();
  419 | 	},
  420 | );
  421 |
  422 | When(
  423 | 	'I click on the {string} button in the waiting page',
  424 | 	async ({ page }, buttonText: string) => {
  425 | 		const buttonElement = page
  426 | 			.locator('.xWaitingList__btn')
  427 | 			.getByRole('button', { name: buttonText });
  428 | 		await buttonElement.click();
  429 | 	},
  430 | );
  431 |
  432 | Then(
  433 | 	'I should see the service {string} in my cart',
  434 | 	async ({ page }, service: string) => {
  435 | 		const serviceElement = page
  436 | 			.locator('.xTicketItems__content')
  437 | 			.getByText(service, { exact: true });
  438 | 		await expect(serviceElement).toHaveText(service);
  439 | 	},
  440 | );
  441 |
  442 | Then(
  443 | 	'I should see the duration {string} in my cart',
  444 | 	async ({ page }, duration: string) => {
  445 | 		const durationElement = page
  446 | 			.locator('.appt-duration')
  447 | 			.getByText(duration, { exact: true });
  448 | 		await expect(durationElement).toHaveText(duration);
  449 | 	},
  450 | );
  451 |
  452 | Then(
  453 | 	'I should see the employee {string} for all items in a package in my cart',
  454 | 	async ({ page }, employee: string) => {
  455 | 		const elements = await page
  456 | 			.locator('.childService')
  457 | 			.getByText(employee, { exact: true })
  458 | 			.all();
  459 |
  460 | 		for (const element of elements) {
  461 | 			await expect(element).toHaveText(employee);
  462 | 		}
  463 | 	},
  464 | );
  465 |
  466 | Then(
  467 | 	'I should see the customer {string} in the waiting list',
  468 | 	async ({ page }, customer: string) => {
```