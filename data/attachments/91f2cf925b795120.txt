# Instructions

- Following Playwright test failed.
- Explain why, be concise, respect Playwright best practices.
- Provide a snippet of code with the fix, if possible.

# Test info

- Name: Create tickets >> Create a ticket and pay with Gift Card type
- Location: /home/circleci/project/e2e/pos-web/dist/bdd/create-tickets.feature.spec.js:115:3

# Error details

```
Error: locator.click: Error: strict mode violation: locator('div.xQueueList').getByText('Emma', { exact: true }) resolved to 6 elements:
    1) <span class="nickname">Emma</span> aka getByRole('listitem').filter({ hasText: '#42 Emma07:00 AMTurn:' }).locator('span').nth(1)
    2) <span class="nickname">Emma</span> aka getByRole('listitem').filter({ hasText: '#73 Emma07:00 AMTurn:' }).locator('span').nth(1)
    3) <span class="nickname">Emma</span> aka getByRole('listitem').filter({ hasText: '#74 Emma07:00 AMTurn:' }).locator('span').nth(1)
    4) <span class="nickname">Emma</span> aka getByRole('listitem').filter({ hasText: '#84 Emma07:00 AMTurn:' }).locator('span').nth(1)
    5) <span class="nickname">Emma</span> aka getByRole('listitem').filter({ hasText: '#120 Emma07:00 AMTurn:' }).locator('span').nth(1)
    6) <span class="nickname">Emma</span> aka getByRole('listitem').filter({ hasText: '#132 Emma07:00 AMTurn:' }).locator('span').nth(1)

Call log:
  - waiting for locator('div.xQueueList').getByText('Emma', { exact: true })

    at HomePage.selectEmployee (/home/circleci/project/e2e/pos-web/src/steps/home.page.ts:70:18)
    at Object.fn (/home/circleci/project/node_modules/.pnpm/playwright-bdd@8.2.1_@cucumber+message-streams@4.0.1_@cucumber+messages@27.0.2__@playwright+test@1.51.1/node_modules/playwright-bdd/src/steps/decorators/steps.ts:64:17)
    at /home/circleci/project/node_modules/.pnpm/playwright-bdd@8.2.1_@cucumber+message-streams@4.0.1_@cucumber+messages@27.0.2__@playwright+test@1.51.1/node_modules/playwright-bdd/src/runtime/bddStepInvoker.ts:57:60
    at BddStepInvoker.invoke (/home/circleci/project/node_modules/.pnpm/playwright-bdd@8.2.1_@cucumber+message-streams@4.0.1_@cucumber+messages@27.0.2__@playwright+test@1.51.1/node_modules/playwright-bdd/src/runtime/bddStepInvoker.ts:51:5)
    at /home/circleci/project/e2e/pos-web/dist/bdd/create-tickets.feature.spec.js:117:5
```

# Page snapshot

```yaml
- banner:
  - img
  - list:
    - listitem: Timesheet
    - listitem: Check In
    - listitem: Tickets
    - listitem: Turn
    - listitem: Appointment
    - listitem: Quick Sale
    - listitem: Balance
  - text: Apr 07
  - list:
    - listitem: BLANC NAILS
    - listitem:
      - paragraph: ", , | (707) 707-1122"
      - text: "Thuyen Nguyen | Station: 1"
- list
- main:
  - text: CHECK-INS No Customer
  - tablist:
    - tab "NAILS" [selected]
    - tab "HAIR"
  - tabpanel:
    - list:
      - listitem: "S #1 Sam 07:00 AM Turn: 0.0"
      - listitem: "M #2 Maya 07:00 AM Turn: 0.0"
      - listitem: "K #3 Kelley 07:00 AM Turn: 0.0"
      - listitem: "K #4 Kim 07:00 AM Turn: 0.0"
      - listitem: "T #5 Tom 07:00 AM Turn: 0.0"
      - listitem:
        - img "item service Emily"
        - text: "#6 Emily 07:00 AM Turn: 0.0"
      - listitem: "B #7 Bella 07:00 AM Turn: 0.0"
      - listitem: "S #8 Sophia 07:00 AM Turn: 0.0"
      - listitem: "H #9 Harry 07:00 AM Turn: 0.0"
      - listitem: "R #10 Ruby 07:00 AM Turn: 0.0"
      - listitem: "H #11 Hanna 07:00 AM Turn: 0.0"
      - listitem: "S #12 Sarah 07:00 AM Turn: 0.0"
      - listitem: "T #13 Tina 07:00 AM Turn: 0.0"
      - listitem: "E #14 Ethan 07:00 AM Turn: 0.0"
      - listitem: "H #15 Hanna 07:00 AM Turn: 0.0"
      - listitem: "B #16 Brian 07:00 AM Turn: 0.0"
      - listitem: "K #17 Kelley 07:00 AM Turn: 0.0"
      - listitem: "T #18 Tina 07:00 AM Turn: 0.0"
      - listitem: "B #19 Brian 07:00 AM Turn: 0.0"
      - listitem: "S #20 Sarah 07:00 AM Turn: 0.0"
      - listitem: "K #21 Kelley 07:00 AM Turn: 0.0"
      - listitem: "L #22 Lisa 07:00 AM Turn: 0.0"
      - listitem: "J #23 Jack 07:00 AM Turn: 0.0"
      - listitem: "M #24 Maya 07:00 AM Turn: 0.0"
      - listitem: "S #25 Sandy 07:00 AM Turn: 0.0"
      - listitem: "S #26 Sam 07:00 AM Turn: 0.0"
      - listitem: "B #27 Brian 07:00 AM Turn: 0.0"
      - listitem: "L #28 Lisa 07:00 AM Turn: 0.0"
      - listitem: "R #29 Ruby 07:00 AM Turn: 0.0"
      - listitem: "E #30 Ethan 07:00 AM Turn: 0.0"
      - listitem: "A #31 Anna 07:00 AM Turn: 0.0"
      - listitem: "E #32 Ethan 07:00 AM Turn: 0.0"
      - listitem: "L #33 Lisa 07:00 AM Turn: 0.0"
      - listitem: "K #34 Kim 07:00 AM Turn: 0.0"
      - listitem: "T #35 Tom 07:00 AM Turn: 0.0"
      - listitem: "B #36 Bella 07:00 AM Turn: 0.0"
      - listitem: "R #37 Ruby 07:00 AM Turn: 0.0"
      - listitem: "L #38 Laura 07:00 AM Turn: 0.0"
      - listitem: "R #39 Ruby 07:00 AM Turn: 0.0"
      - listitem: "K #40 Kelley 07:00 AM Turn: 0.0"
      - listitem: "T #41 Tom 07:00 AM Turn: 0.0"
      - listitem:
        - img "item service Emma"
        - text: "#42 Emma 07:00 AM Turn: 0.0"
      - listitem: "D #43 Dylan 07:00 AM Turn: 0.0"
      - listitem: "K #44 Kim 07:00 AM Turn: 0.0"
      - listitem: "T #45 Tom 07:00 AM Turn: 0.0"
      - listitem: "T #46 Tim 07:00 AM Turn: 0.0"
      - listitem: "A #47 Anna 07:00 AM Turn: 0.0"
      - listitem: "H #48 Harry 07:00 AM Turn: 0.0"
      - listitem: "T #49 Tim 07:00 AM Turn: 0.0"
      - listitem: "T #50 Tim 07:00 AM Turn: 0.0"
      - listitem: "B #51 Brian 07:00 AM Turn: 0.0"
      - listitem: "R #52 Ruby 07:00 AM Turn: 0.0"
      - listitem: "S #53 Sandy 07:00 AM Turn: 0.0"
      - listitem: "J #54 Jack 07:00 AM Turn: 0.0"
      - listitem: "T #55 Tina 07:00 AM Turn: 0.0"
      - listitem: "C #56 Claire 07:00 AM Turn: 0.0"
      - listitem:
        - img "item service Emily"
        - text: "#57 Emily 07:00 AM Turn: 0.0"
      - listitem: "S #58 Sandy 07:00 AM Turn: 0.0"
      - listitem: "S #59 Sandy 07:00 AM Turn: 0.0"
      - listitem: "J #60 Jack 07:00 AM Turn: 0.0"
      - listitem: "S #61 Sophia 07:00 AM Turn: 0.0"
      - listitem: "S #62 Sarah 07:00 AM Turn: 0.0"
      - listitem: "L #63 Lisa 07:00 AM Turn: 0.0"
      - listitem: "L #64 Laura 07:00 AM Turn: 0.0"
      - listitem: "D #65 Dylan 07:00 AM Turn: 0.0"
      - listitem: "B #66 Bella 07:00 AM Turn: 0.0"
      - listitem: "B #67 Brian 07:00 AM Turn: 0.0"
      - listitem: "R #68 Ruby 07:00 AM Turn: 0.0"
      - listitem: "A #69 Anna 07:00 AM Turn: 0.0"
      - listitem: "H #70 Harry 07:00 AM Turn: 0.0"
      - listitem: "T #71 Tina 07:00 AM Turn: 0.0"
      - listitem: "L #72 Laura 07:00 AM Turn: 0.0"
      - listitem:
        - img "item service Emma"
        - text: "#73 Emma 07:00 AM Turn: 0.0"
      - listitem:
        - img "item service Emma"
        - text: "#74 Emma 07:00 AM Turn: 0.0"
      - listitem: "S #75 Sandy 07:00 AM Turn: 0.0"
      - listitem: "C #76 Christ 07:00 AM Turn: 0.0"
      - listitem: "C #77 Christ 07:00 AM Turn: 0.0"
      - listitem: "T #78 Tina 07:00 AM Turn: 0.0"
      - listitem: "L #79 Laura 07:00 AM Turn: 0.0"
      - listitem: "B #80 Bella 07:00 AM Turn: 0.0"
      - listitem: "H #81 Harry 07:00 AM Turn: 0.0"
      - listitem: "K #82 Kim 07:00 AM Turn: 0.0"
      - listitem: "S #83 Sam 07:00 AM Turn: 0.0"
      - listitem:
        - img "item service Emma"
        - text: "#84 Emma 07:00 AM Turn: 0.0"
      - listitem: "D #85 Dylan 07:00 AM Turn: 0.0"
      - listitem: "E #86 Ethan 07:00 AM Turn: 0.0"
      - listitem: "C #87 Claire 07:00 AM Turn: 0.0"
      - listitem: "L #88 Lisa 07:00 AM Turn: 0.0"
      - listitem: "A #89 Anna 07:00 AM Turn: 0.0"
      - listitem: "B #90 Bella 07:00 AM Turn: 0.0"
      - listitem: "L #91 Laura 07:00 AM Turn: 0.0"
      - listitem:
        - img "item service Emily"
        - text: "#92 Emily 07:00 AM Turn: 0.0"
      - listitem: "S #93 Sophia 07:00 AM Turn: 0.0"
      - listitem: "C #94 Christ 07:00 AM Turn: 0.0"
      - listitem: "J #95 Jack 07:00 AM Turn: 0.0"
      - listitem: "S #96 Sarah 07:00 AM Turn: 0.0"
      - listitem: "T #97 Tim 07:00 AM Turn: 0.0"
      - listitem: "C #98 Claire 07:00 AM Turn: 0.0"
      - listitem: "C #99 Christ 07:00 AM Turn: 0.0"
      - listitem: "H #100 Hanna 07:00 AM Turn: 0.0"
      - listitem: "C #101 Christ 07:00 AM Turn: 0.0"
      - listitem: "A #102 Anna 07:00 AM Turn: 0.0"
      - listitem: "S #103 Sophia 07:00 AM Turn: 0.0"
      - listitem: "T #104 Tina 07:00 AM Turn: 0.0"
      - listitem:
        - img "item service Emily"
        - text: "#105 Emily 07:00 AM Turn: 0.0"
      - listitem: "L #106 Laura 07:00 AM Turn: 0.0"
      - listitem: "E #107 Ethan 07:00 AM Turn: 0.0"
      - listitem: "C #108 Claire 07:00 AM Turn: 0.0"
      - listitem: "M #109 Maya 07:00 AM Turn: 0.0"
      - listitem: "K #110 Kelley 07:00 AM Turn: 0.0"
      - listitem: "D #111 Dylan 07:00 AM Turn: 0.0"
      - listitem: "M #112 Maya 07:00 AM Turn: 0.0"
      - listitem: "S #113 Sam 07:00 AM Turn: 0.0"
      - listitem: "M #114 Maya 07:00 AM Turn: 0.0"
      - listitem: "T #115 Tim 07:00 AM Turn: 0.0"
      - listitem: "J #116 Jack 07:00 AM Turn: 0.0"
      - listitem: "H #117 Hanna 07:00 AM Turn: 0.0"
      - listitem: "K #118 Kim 07:00 AM Turn: 0.0"
      - listitem: "H #119 Hanna 07:00 AM Turn: 0.0"
      - listitem:
        - img "item service Emma"
        - text: "#120 Emma 07:00 AM Turn: 0.0"
      - listitem: "M #121 Maya 07:00 AM Turn: 0.0"
      - listitem: "D #122 Dylan 07:00 AM Turn: 0.0"
      - listitem: "S #123 Sandy 07:00 AM Turn: 0.0"
      - listitem: "H #124 Harry 07:00 AM Turn: 0.0"
      - listitem: "B #125 Brian 07:00 AM Turn: 0.0"
      - listitem: "T #126 Tom 07:00 AM Turn: 0.0"
      - listitem: "S #127 Sarah 07:00 AM Turn: 0.0"
      - listitem: "A #128 Anna 07:00 AM Turn: 0.0"
      - listitem: "H #129 Hanna 07:00 AM Turn: 0.0"
      - listitem: "T #130 Tom 07:00 AM Turn: 0.0"
      - listitem: "S #131 Sophia 07:00 AM Turn: 0.0"
      - listitem:
        - img "item service Emma"
        - text: "#132 Emma 07:00 AM Turn: 0.0"
      - listitem: "S #133 Sophia 07:00 AM Turn: 0.0"
      - listitem: "S #134 Sarah 07:00 AM Turn: 0.0"
      - listitem: "S #135 Sam 07:00 AM Turn: 0.0"
      - listitem: "T #136 Tim 07:00 AM Turn: 0.0"
      - listitem: "H #137 Harry 07:00 AM Turn: 0.0"
      - listitem: "C #138 Christ 07:00 AM Turn: 0.0"
      - listitem: "B #139 Bella 07:00 AM Turn: 0.0"
      - listitem: "J #140 Jack 07:00 AM Turn: 0.0"
      - listitem: "D #141 Dylan 07:00 AM Turn: 0.0"
      - listitem: "E #142 Ethan 07:00 AM Turn: 0.0"
      - listitem:
        - img "item service Emily"
        - text: "#143 Emily 07:00 AM Turn: 0.0"
      - listitem: "C #144 Claire 07:00 AM Turn: 0.0"
      - listitem: "S #145 Sam 07:00 AM Turn: 0.0"
      - listitem: "L #146 Lisa 07:00 AM Turn: 0.0"
      - listitem: "K #147 Kim 07:00 AM Turn: 0.0"
      - listitem:
        - img "item service Emily"
        - text: "#148 Emily 07:00 AM Turn: 0.0"
      - listitem: "K #149 Kelley 07:00 AM Turn: 0.0"
      - listitem: "C #150 Claire 07:00 AM Turn: 0.0"
      - listitem: "M #151 Mia 09:47 AM Turn: 0.0"
      - listitem:
        - img "item service Owner"
        - text: "#152 Owner 09:49 AM Turn: 0.0"
      - listitem: "C #153 Chloe 09:52 AM Turn: 0.0"
      - listitem: "A #154 Angie 09:57 AM Turn: 0.0"
      - listitem: "S #155 Samantha 09:58 AM Turn: 0.0"
      - listitem: "D #156 Daniel 10:01 AM Turn: 0.0"
      - listitem: "J #157 Julia 10:03 AM Turn: 0.0"
      - listitem: "D #158 Daisy 10:06 AM Turn: 0.0"
      - listitem: "E #159 Evelyn 10:07 AM Turn: 0.0"
      - listitem: "N #160 Natalie 10:12 AM Turn: 0.0"
  - button "search"
  - list:
    - listitem:
      - button "Ready"
    - listitem:
      - button "In Service"
    - listitem:
      - button "Paid"
    - listitem:
      - button "All" [disabled]
  - list:
    - listitem: "M #141 Mia 11:32 AM - Now 0' Waiting $0.00"
    - listitem: "C #142 Christ 11:33 AM - Now 0' Waiting $0.00"
    - listitem: "M #143 Mia 11:34 AM - Now 0' Waiting $0.00"
    - listitem:
      - img "item service Owner"
      - text: "#144 Owner 11:35 AM - Now 0' Waiting $0.00"
    - listitem: "C #145 Christ 11:35 AM - Now 0' Waiting $0.00"
    - listitem: "M #146 Mia 11:35 AM - Now 0' Waiting $0.00"
- alert
```

# Test source

```ts
   1 | import { expect } from '@playwright/test';
   2 | import { Fixture, When } from 'playwright-bdd/decorators';
   3 |
   4 | import { constants } from '#const';
   5 | import { PageId, type TestOptions } from '#types';
   6 |
   7 | import { TicketViewPage } from './ticket-view.page';
   8 | import { xPage } from './x.page';
   9 |
  10 | export
  11 | @Fixture('homePage')
  12 | class HomePage extends xPage {
  13 | 	override open() {
  14 | 		return this.page.goto(constants.PageUrl[PageId.HOME]);
  15 | 	}
  16 |
  17 | 	/**
  18 | 	 * A list of this page specific locators
  19 | 	 */
  20 | 	public override get locators() {
  21 | 		const { page } = this;
  22 |
  23 | 		const employeeList = page.locator('div.xQueueList');
  24 | 		const ticketList = page.locator('div.ListTicket');
  25 |
  26 | 		return {
  27 | 			...super.locators,
  28 |
  29 | 			/**
  30 | 			 * Locate the employee list section, which is the middle column of the {@link PageId.HOME} screen
  31 | 			 */
  32 | 			employeeList,
  33 | 			/**
  34 | 			 * Locate an employee by their name
  35 | 			 */
  36 | 			employee: (employeeName: string) =>
  37 | 				employeeList.getByText(employeeName, { exact: true }),
  38 |
  39 | 			/**
  40 | 			 * Locate the on-going ticket list, which is the right column of the {@link PageId.HOME} screen
  41 | 			 */
  42 | 			ticketList,
  43 | 			/**
  44 | 			 * Locate an on-going ticket by its ID
  45 | 			 */
  46 | 			ticketById: (ticketId: string) =>
  47 | 				ticketList.getByText(`#${ticketId}`, { exact: true }),
  48 | 		};
  49 | 	}
  50 |
  51 | 	/**
  52 | 	 * Select an on-going ticket (by its number) on the home screen
  53 | 	 */
  54 | 	public selectTicketById(id: string, options: TestOptions = {}) {
  55 | 		const { locators } = this;
  56 |
  57 | 		return locators.ticketById(id).click({ timeout: options.timeout });
  58 | 	}
  59 |
  60 | 	/* -------------------------------- BDD steps ------------------------------- */
  61 |
  62 | 	/**
  63 | 	 * Select an employee on {@link PageId.HOME} screen
  64 | 	 */
  65 | 	@When('I select the {string} employee')
  66 | 	public async selectEmployee(employeeName: string) {
  67 | 		const { locators } = this;
  68 |
  69 | 		const employee = locators.employee(employeeName);
> 70 | 		await employee.click();
     | 		               ^ Error: locator.click: Error: strict mode violation: locator('div.xQueueList').getByText('Emma', { exact: true }) resolved to 6 elements:
  71 |
  72 | 		await this.waitForResponseOfAPI('Save lock number');
  73 | 		await expect(locators.pageName).toHaveText(TicketViewPage.TITLE);
  74 |
  75 | 		const ticketViewPage = new TicketViewPage(
  76 | 			this.testConfig,
  77 | 			this.testStorage,
  78 | 			this.page,
  79 | 		);
  80 | 		const ticketNumber = await ticketViewPage.getTicketNumber();
  81 |
  82 | 		// keep track ongoing tickets, used for cleanup in case of test failure
  83 | 		ticketNumber && this.testStorage.ongoingTickets.add(ticketNumber);
  84 | 	}
  85 | }
  86 |
```